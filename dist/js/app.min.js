const header=document.querySelector(".page-header"),headerContent=document.querySelector(".menu__content"),headerToggle=document.querySelector(".header__toggle"),headerMenu=document.querySelector(".header__menu"),form=document.querySelector(".form__container"),formButton=document.querySelector(".header__button"),formClosed=document.querySelector(".form__close"),catalog=document.querySelector(".catalog"),screenHeight=window.screen.height,video=document.querySelector(".header__video"),title=document.querySelector(".header__content"),formContainer=document.querySelector(".form__container"),inputs=document.querySelectorAll("input[data-rule]"),containerClicked=function(){event.target===formContainer&&formClose()},esc=function(){27==event.keyCode&&formClose()},formClose=function(){form.classList.remove("open-flex"),headerContent.classList.remove("menu__content--active"),document.body.classList.remove("no-scroll"),formClosed.removeEventListener("click",formClose),formButton.addEventListener("click",formOpen),formContainer.removeEventListener("click",containerClicked),removeEventListener("keydown",esc)},formOpen=function(){form.classList.add("open-flex"),headerContent.classList.add("menu__content--active"),document.body.classList.add("no-scroll"),formButton.removeEventListener("click",formOpen),formClosed.addEventListener("click",formClose),formContainer.addEventListener("click",containerClicked),addEventListener("keydown",esc)},validateForm=function(e){for(let t of e)t.addEventListener("blur",(function(){let e,t=this.dataset.rule,o=this.value;switch(t){case"phone":e=/([0-9]{1,3})(\([0-9]{2,3}\))-([0-9]{3})-([0-9]{2})-([0-9]{2})/.test(o);break;case"name":e=/^[А-Яа-яЁёa-zA-Z\s]+$/.test(o);break;case"email":e=/([A-z0-9_.-]{1,})@([A-z0-9_.-]{1,}).([A-z]{2,8})/.test(o)}o.length<1||(e?(this.parentElement.classList.remove("label-invalid"),this.parentElement.classList.add("label-valid")):(this.parentElement.classList.remove("label-valid"),this.parentElement.classList.add("label-invalid")))}))},scrolled=function(e,t,o){let n;o<1?n=1/o:o>1&&(n=100/o),window.onscroll=function(){let o=1-(1-e.getBoundingClientRect().y/e.offsetTop)*n;t.style.opacity=o,o<0?headerContent.classList.add("menu__content--bg-white"):o>0&&headerContent.classList.contains("menu__content--bg-white")&&headerContent.classList.remove("menu__content--bg-white")}},catalogScrolled=function(){let e=video.offsetHeight-.325*video.offsetHeight;0!==e?(catalog.style.marginTop=e+"px",title.style.marginTop=(e-headerMenu.offsetHeight)/2-title.offsetHeight/2+headerMenu.offsetHeight+"px"):(catalog.style.marginTop=null,title.style.marginTop=null)};headerToggle.addEventListener("click",(function(){headerMenu.classList.contains("header__menu--open")?(headerMenu.classList.remove("header__menu--open"),document.body.classList.remove("no-scroll")):(headerMenu.classList.add("header__menu--open"),document.body.classList.add("no-scroll"))})),formButton.addEventListener("click",formOpen),scrolled(catalog,header,75),catalogScrolled(),window.onresize=catalogScrolled,$("#phone").mask("+7(999)-999-99-99"),validateForm(inputs);